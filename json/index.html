<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Document</title>
  </head>

  <body>
    <!-- là một định dạng dữ liệu (chuỗi) -->
    <!-- javascrip object notation -->
    <!-- json : number, boolean , null , array , object -->
    <!-- promise -->
    <!-- khởi tạo promise -->
    <!-- tạo executor -->
    <!-- promise là khái niệm để sử lý bất đồng bộ  -->
    <script>
      var promise = new Promise(
        //executor
        function (resolve, reject) {
          // luôn luôn phải gọi một trong hai thằng
          //logic
          /// khi thành công gọi đến resolve() ,
          resolve();
          // reject();
          // khi thất bại gói đến reject ()
        }
      );
      promise
        .then(function () {
          return 1;
        })
        .then(function (data) {
          console.log(data);
          return 2;
        })
        .then(function (data) {
          console.log(data);
          return 3;
        })
        .then(function (data) {
          console.log(data);
        })
        .catch(function () {
          console.log("false");
        })
        .finally(function () {
          console.log("done");
        });
    </script>

    <script>
      function sleep(ms) {
        return new Promise((resolve) => {
          setTimeout(resolve, ms);
        });
      }

      sleep(1000)
        .then(() => {
          console.log(1);
          return sleep(1000);
        })
        .then(() => {
          console.log(2);
          return sleep(1000);
        })
        .then(() => {
          console.log(3);
          return sleep(1000);
        })
        .then(() => {
          console.log(4);
          return sleep(1000);
        })
        .catch((error) => {
          console.log(error);
        })
        .finally(function () {
          console.log("done");
        });
    </script>
  </body>
</html>
